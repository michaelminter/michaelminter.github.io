
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Airbrake: Send Error Notices using Javascript - Michael Minter</title>
  <meta name="author" content="Michael Minter">
  <link rel="author" href="humans.txt">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  
    
  
  <meta name="description" content="Right now you may be saying to yourself, &#8220;but why not just use an AJAX request inside of my Javascript application or use the Image().src hack &hellip;">
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://moorberry.net/blog/airbrake-error-notice-javascript/">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Michael Minter" type="application/atom+xml">
  <meta name="og:type" content="website" />
  <meta name="og:site_name" content="Michael Minter" />
  <meta name="og:title" content="Airbrake: Send Error Notices using Javascript" />
  <meta name="og:description" content="Right now you may be saying to yourself, &#8220;but why not just use an AJAX request inside of my Javascript application or use the Image().src hack &hellip;" />
  <meta name="og:url" content="http://moorberry.net/blog/airbrake-error-notice-javascript/"/>
  <meta name="url" content="http://moorberry.net/blog/airbrake-error-notice-javascript/">
  
  <meta name="subject" content="AirbrakeJavascriptRuby on RailsSinatra"/>
  <meta name="category" content="AirbrakeJavascriptRuby on RailsSinatra"/>
  
  <meta name="distribution" content="global">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" href="/stylesheets/proudify.css" />
<link rel="stylesheet" type="text/css" href="/stylesheets/custom.css" />
<link rel="shortcut icon" href="http://www.gravatar.com/avatar/c40bf0fd76b6d591122a1dab3e88b0fd.png?s=16" title="Favicon" />

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34437469-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><div class="navbar">
  <div class="navbar-inner">
    <a class="brand" href="/">Michael Minter</a>
    <ul class="nav">
      <li><a href="/">Home</a></li>
      <li><a href="/blog/archives">Archives</a></li>
    </ul>
    <ul class="nav" data-subscription="rss">
      <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
      
    </ul>
      
    <form class="navbar-form" action="http://google.com/search" method="get">
      <fieldset role="search">
        <input type="hidden" name="q" value="site:moorberry.net" />
        <input class="span2" type="text" name="q" results="0" placeholder="Search"/>
      </fieldset>
    </form>
      
    
  </div>
</div>
</nav>
  <div class="wrapper_single" style="padding:40px 0;">

    <div style="clear:both;height:90px;margin:0 auto;padding:0 0 40px 60px;width:720px;">
      <script type="text/javascript"><!--
      google_ad_client = "ca-pub-7424434269432645";
      /* moorberry.net (test) */
      google_ad_slot = "9894759925";
      google_ad_width = 728;
      google_ad_height = 90;
      //-->
      </script>
      <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
    </div>

    <div class="container">
      <article class="span8 offset2" role="article">
        <div class="article-format">
  
    <header>
      
        <h1 class="entry-title">Airbrake: Send Error Notices Using Javascript</h1>
      
      
        <p class="meta">
          
  


  
    <span class="byline author vcard">by <span class="fn">Michael Minter</span></span>
  

 - 
          








  


<time datetime="2013-02-19T12:46:00-06:00" pubdate data-updated="true">Feb 19<span>th</span>, 2013</time> - 
          

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/airbrake/'>Airbrake</a>, <a class='category' href='/blog/categories/javascript/'>Javascript</a>, <a class='category' href='/blog/categories/ruby-on-rails/'>Ruby on Rails</a>, <a class='category' href='/blog/categories/sinatra/'>Sinatra</a>
  
</span>


          
           | <a href="#disqus_thread">Comments</a>
          
        </p>
      
    </header>
  
  
  
    <div class="entry-content">
      <div id="ad_container_inside_article" style="clear:both;height:90px;margin:20px auto;padding:0;width:720px;">
        <script type="text/javascript"><!--
        google_ad_client = "ca-pub-7424434269432645";
        /* moorberry.net (octopress) */
        google_ad_slot = "8992473921";
        google_ad_width = 728;
        google_ad_height = 90;
        //-->
        </script>
        <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
      </div>
      <p>Right now you may be saying to yourself, &#8220;but why not just use an AJAX request inside of my Javascript application or use the Image().src hack&#8230;&#8221;</p>

<!--more-->


<p>Well they don&#8217;t work across all medias.</p>

<p>You cannot issue requests through the XMLHttpRequest to other domains or subdomains. If you are issuing the request from www.foo.com you also need to target the request at www.foo.com and make certain to remember the www.</p>

<p>If you really need to hit another domain you can use <a href="http://en.wikipedia.org/wiki/JSONP" target="_blank">JsonP</a> where the browser utilizes the <code>&lt;script&gt;</code> tags ability to load scripts from a different domain. The loaded script then executes a callback function to give you the data. But for regular AJAX calls you cannot leave the source domain at all.</p>

<p>See the Wiki article on <a href="http://en.wikipedia.org/wiki/Same_origin_policy" target="_blank">Same Origin Policy</a></p>

<p>In your Rails/Sinatra application controller file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">notice</span> <span class="o">=</span> <span class="nx">params</span><span class="p">[</span><span class="o">:</span><span class="nx">notice</span><span class="p">]</span>
</span><span class='line'><span class="nx">url</span>    <span class="o">=</span> <span class="nx">URI</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s1">&#39;http://api.airbrake.io/notifier_api/v2/notices&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="nx">request</span>              <span class="o">=</span> <span class="nx">Net</span><span class="o">::</span><span class="nx">HTTP</span><span class="o">::</span><span class="nx">Post</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">path</span><span class="p">)</span>
</span><span class='line'><span class="nx">request</span><span class="p">.</span><span class="nx">content_type</span> <span class="o">=</span> <span class="s1">&#39;text/xml&#39;</span>
</span><span class='line'><span class="nx">request</span><span class="p">.</span><span class="nx">body</span>         <span class="o">=</span> <span class="s2">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;</span>
</span><span class='line'><span class="s2">                      &lt;notice version=\&quot;2.3\&quot;&gt;</span>
</span><span class='line'><span class="s2">                        &lt;api-key&gt;948fhc4h9f98f190a4d69fee945d8b133cc11&lt;/api-key&gt;</span>
</span><span class='line'><span class="s2">                        &lt;notifier&gt;</span>
</span><span class='line'><span class="s2">                          &lt;name&gt;Airbrake Notifier&lt;/name&gt;</span>
</span><span class='line'><span class="s2">                          &lt;version&gt;3.1.6&lt;/version&gt;</span>
</span><span class='line'><span class="s2">                          &lt;url&gt;http://api.airbrake.io&lt;/url&gt;</span>
</span><span class='line'><span class="s2">                        &lt;/notifier&gt;</span>
</span><span class='line'><span class="s2">                        &lt;error&gt;</span>
</span><span class='line'><span class="s2">                          &lt;class&gt;RuntimeError&lt;/class&gt;</span>
</span><span class='line'><span class="s2">                          &lt;message&gt;#{notice}&lt;/message&gt;</span>
</span><span class='line'><span class="s2">                          &lt;backtrace&gt;</span>
</span><span class='line'><span class="s2">                            &lt;line method=\&quot;public\&quot; file=\&quot;/testapp/app/models/user.rb\&quot; number=\&quot;53\&quot;/&gt;</span>
</span><span class='line'><span class="s2">                            &lt;line method=\&quot;index\&quot; file=\&quot;/testapp/app/controllers/users_controller.rb\&quot; number=\&quot;14\&quot;/&gt;</span>
</span><span class='line'><span class="s2">                          &lt;/backtrace&gt;</span>
</span><span class='line'><span class="s2">                        &lt;/error&gt;</span>
</span><span class='line'><span class="s2">                        &lt;request&gt;</span>
</span><span class='line'><span class="s2">                          &lt;url&gt;#{request.url}&lt;/url&gt;</span>
</span><span class='line'><span class="s2">                          &lt;component/&gt;</span>
</span><span class='line'><span class="s2">                          &lt;action/&gt;</span>
</span><span class='line'><span class="s2">                          &lt;cgi-data&gt;</span>
</span><span class='line'><span class="s2">                            &lt;var key=\&quot;SERVER_NAME\&quot;&gt;example.org&lt;/var&gt;</span>
</span><span class='line'><span class="s2">                            &lt;var key=\&quot;HTTP_USER_AGENT\&quot;&gt;Mozilla&lt;/var&gt;</span>
</span><span class='line'><span class="s2">                          &lt;/cgi-data&gt;</span>
</span><span class='line'><span class="s2">                        &lt;/request&gt;</span>
</span><span class='line'><span class="s2">                        &lt;server-environment&gt;</span>
</span><span class='line'><span class="s2">                          &lt;project-root&gt;/testapp&lt;/project-root&gt;</span>
</span><span class='line'><span class="s2">                          &lt;environment-name&gt;production&lt;/environment-name&gt;</span>
</span><span class='line'><span class="s2">                          &lt;app-version&gt;1.0.0&lt;/app-version&gt;</span>
</span><span class='line'><span class="s2">                        &lt;/server-environment&gt;</span>
</span><span class='line'><span class="s2">                      &lt;/notice&gt;&quot;</span>
</span><span class='line'><span class="nx">response</span> <span class="o">=</span> <span class="nx">Net</span><span class="o">::</span><span class="nx">HTTP</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">host</span><span class="p">,</span> <span class="nx">url</span><span class="p">.</span><span class="nx">port</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="nx">http</span><span class="o">|</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">request</span><span class="p">)}</span>
</span></code></pre></td></tr></table></div></figure>


<p>In your javascript:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">airbrake</span><span class="p">(</span><span class="nx">notice</span><span class="p">){</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">airbrake</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span> <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;/api/v1/error&#39;</span><span class="p">,</span> <span class="nx">context</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="nx">cache</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">{</span> <span class="nx">notice</span><span class="o">:</span> <span class="nx">notice</span> <span class="p">}</span> <span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>To call this function, simply:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">airbrake</span> <span class="p">(</span><span class="s2">&quot;This goose won&#39;t cook.&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Some alternative error/message handlers include: <a href="http://loggly.com" target="_blank">Loggly</a>, <a href="https://papertrailapp.com/" target="_blank">Papertrail</a>, <a href="https://logentries.com/" target="_blank">Log Entries</a>, or better yet create your own with <a href="https://github.com/flyingmachine/whoops" target="_blank">Whoops</a> which later I&#8217;d like to research and develop upon for my own error catching application.</p>

    </div>
  
  
    <footer>
      <div style="border:#012b36 1px dashed;margin:40px 0;padding:20px 0 0 20px;">
        <p>I love sharing! This text is copyrighted under Creative Commons <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" alt="Share-alike License" title="Share-alike License">Attribution-Noncommercial-Share Alike 3.0 Unported</a> license, unless stated otherwise. </p>
        <p>Let me know how you use it - <a href="#footer-widgets" alt="Contact Michael" title="Contact Michael">contact me here.</a></p>
      </div>
      
        <a class="pull-left" href="/blog/datatables-twitter-bootstrap-pagination/" title="Previous Post: DataTables Pagination with Twitter Bootstrap">&laquo; DataTables Pagination with Twitter Bootstrap</a>
      
      
        <a class="pull-right" href="/blog/localstorage-object-relational-mapping/" title="Next Post: localStorage: Object Relational Mapping">localStorage: Object Relational Mapping &raquo;</a>
      
    </footer>
  
</div>

      </article>
      
      <div id="ad_container" style="clear:both;height:90px;margin:0 auto;padding:0 0 0 60px;width:720px;">
        <script type="text/javascript"><!--
        google_ad_client = "ca-pub-7424434269432645";
        /* moorberry.net (octopress) */
        google_ad_slot = "8992473921";
        google_ad_width = 728;
        google_ad_height = 90;
        //-->
        </script>
        <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
      </div>
    </div>
  </div>
  <div class="comments_wrapper"> 
    
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
      </section>
    
  </div>

  <!-- AddThis Button BEGIN -->
  <div class="addthis_toolbox addthis_floating_style addthis_counter_style" style="padding-top:10px;right:0;top:212px;">
    <a class="addthis_button_facebook_like" fb:like:layout="box_count"></a>
    <a class="addthis_button_tweet" tw:count="vertical"></a>
    <a class="addthis_button_google_plusone" g:plusone:size="tall"></a>
    <a class="addthis_counter"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-51685d3f427968b8"></script>
  <!-- AddThis Button END -->

  <div id="footer-widgets">
  <div class="container">
    <div class="row">
  <div class="span3">
    <h2>coderwall badges</h2>
<div id="proudify"></div>
<a href="http://coderwall.com/michaelminter" target="_blank"><img src="http://api.coderwall.com/michaelminter/endorsecount.png" alt="Endorse" id="endorse_button" /></a>
  </div>
  <div class="span3">
    <h2>github</h2>
<ul id="activity"></ul>
  </div>
  <div class="span3">
    <h2>twitter</h2>
<a href="https://twitter.com/mothore" class="twitter-follow-button" data-show-count="true" data-lang="en" target="_blank">Follow @mothore</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<div class="tweet" data-twitter-user="mothore"></div>
  </div>
  <div class="span3">
    <h2>about me</h2>
<p>I have been programming desktop and web applications for more than 7 years. My current <a href="http://www.lin-digital.com/" target="_blank">full-time gig</a> keeps me pretty busy but I still like to get <a href="#top" title="Top of page">personal projects</a> done.</p>

<h2>found on</h2>
<a href="mailto:michael@moorberry.net" rel="tooltip" title="Email Michael" target="_blank"><img src="/images/glyphicons_399_e-mail.png" alt="email icon" class="social_icon"></a>


<a href="https://github.com/michaelminter/" rel="tooltip" title="Github" target="_blank"><img class="social_icon" title="Github" alt="github icon" src="/images/glyphicons_381_github.png"></a>







<a href="http://twitter.com/mothore" rel="tooltip" title="Twitter" target="_blank" target="_blank"><img class="social_icon" title="Twitter" alt="Twitter icon" src="/images/glyphicons_391_twitter_t.png"></a>








<a href="http://stackoverflow.com/users/388253/michael-minter" rel="tooltip" title="Stack Overflow" target="_blank"><img class="social_icon" title="Stack Overflow" alt="stack overflow icon" src="/images/glyphicons_400_stack_overflow.png"></a>

<a href="http://www.linkedin.com/in/mminter" rel="tooltip" title="Linkedin" target="_blank"><img class="social_icon" title="Linkedin" alt="Linkedin icon" src="/images/glyphicons_377_linked_in.png"></a>
<!--a href="https://plus.google.com/110730291563876857467" rel="tooltip" title="Google Plus"><img class="social_icon" title="Google Plus" alt="Google Plus icon" src="/images/glyphicons_386_google_plus.png"></a-->

<br /><br />

<!--h2>contact</h2>
<a href="mailto:michael@moorberry.net?subject=Found on Moorberry.net" alt="Mail Michal">Michael@moorberry.net</a-->

  </div>
</div>

  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-left">
  All content is under Copyright &copy; 2010-2013 by the individual authors of this blog and is released<br />under the <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">Attribution-Noncommercial-Share Alike 3.0 Unported</a> license.<br />
</p>
<p class="pull-right">
  <span>Powered by <a href="http://octopress.org/">Octopress</a>.</span>
  
    <!--span>Design by <a href="http://www.AdrianArtiles.com">Adrian Artiles</a>.</span-->
  
</p>

  </div>
</footer>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="/javascripts/jquery-proudify.min.js"></script>
<script>window.jQuery || document.write('<script src="/javascripts/libs/jquery-1.7.2.min.js" type="text/javascript"><\/script>')</script>
<script src="/javascripts/libs/bootstrap.min.js" type="text/javascript"></script>
<script src="/javascripts/libs/jquery.masonry.min.js" type="text/javascript"></script>
<script src="/javascripts/custom.js" type="text/javascript"></script>
<script type="text/javascript">
  $('#proudify').proudify({username:'michaelminter',service:'coderwall'});
</script>
<script type="text/javascript" src="/javascripts/jquery.timeago.js"></script>
<script type="text/javascript" src="/javascripts/jquery.github-activity.js"></script>
<script type="text/javascript">
  $(function() {
    $("ul#activity").githubActivityFor('michaelminter', {
      'limit': 3,
      'wrap': function(item) {
        item.prepend('<img src="/images/github_16.png" style="float:left;margin:0 5px 0 0;" />');
        return item
      }
    });
  });
</script>


<script type="text/javascript">
      var disqus_shortname = 'michaelminter';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://moorberry.net/blog/airbrake-error-notice-javascript/';
        var disqus_url = 'http://moorberry.net/blog/airbrake-error-notice-javascript/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




</body>
</html>
