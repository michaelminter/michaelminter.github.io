
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Paypal Express Checkout NVP API - Moorberry</title>
  <meta name="author" content="Michael Minter">
  <link rel="author" href="humans.txt">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  
    
  
  <meta name="description" content="I&#8217;m not sure why Paypal has written documentation, regarding its own Express Checkout name-value-pair API, with no enthusiasm at all. The &hellip;">
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://moorberry.net/blog/paypal-express-checkout-nvp-api/">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Moorberry" type="application/atom+xml">
  <meta name="og:type" content="website" />
  <meta name="og:site_name" content="Moorberry" />
  <meta name="og:title" content="Paypal Express Checkout NVP API" />
  <meta name="og:description" content="I&#8217;m not sure why Paypal has written documentation, regarding its own Express Checkout name-value-pair API, with no enthusiasm at all. The &hellip;" />
  <meta name="og:url" content="http://moorberry.net/blog/paypal-express-checkout-nvp-api/"/>
  <meta name="url" content="http://moorberry.net/blog/paypal-express-checkout-nvp-api/">
  
  <meta name="subject" content="APIPHP"/>
  <meta name="category" content="APIPHP"/>
  
  <meta name="distribution" content="global">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" href="/stylesheets/proudify.css" />
<link rel="stylesheet" type="text/css" href="/stylesheets/custom.css" />
<link rel="shortcut icon" href="http://www.gravatar.com/avatar/c40bf0fd76b6d591122a1dab3e88b0fd.png?s=16" title="Favicon" />

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34437469-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><div class="navbar">
  <div class="navbar-inner">
    <a class="brand" href="/">Moorberry</a>
    <ul class="nav">
      <li><a href="/">Home</a></li>
      <li><a href="/blog/archives">Archives</a></li>
    </ul>
    <ul class="nav" data-subscription="rss">
      <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
      
    </ul>
      
    <form class="navbar-form" action="http://google.com/search" method="get">
      <fieldset role="search">
        <input type="hidden" name="q" value="site:moorberry.net" />
        <input class="span2" type="text" name="q" results="0" placeholder="Search"/>
      </fieldset>
    </form>
      
    
  </div>
</div>
</nav>
  <div class="wrapper_single" style="padding:40px 0;">

    <div style="clear:both;height:90px;margin:0 auto;padding:0 0 40px 60px;width:720px;">
      <script type="text/javascript"><!--
      google_ad_client = "ca-pub-7424434269432645";
      /* moorberry.net (test) */
      google_ad_slot = "9894759925";
      google_ad_width = 728;
      google_ad_height = 90;
      //-->
      </script>
      <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
    </div>

    <div class="container">
      <article class="span8 offset2" role="article">
        <div class="article-format">
  
    <header>
      
        <h1 class="entry-title">Paypal Express Checkout NVP API</h1>
      
      
        <p class="meta">
          
  


  
    <span class="byline author vcard">by <span class="fn"><a href="/" target="_blank" alt="Homepage" title="Michael Minter">Michael Minter</a></span></span>
  

 - 
          








  


<time datetime="2010-04-03T20:19:00-05:00" pubdate data-updated="true">Apr 3<span>rd</span>, 2010</time> - 
          

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/api/'>API</a>, <a class='category' href='/blog/categories/php/'>PHP</a>
  
</span>


          
           | <a href="#disqus_thread">Comments</a>
          
        </p>
      
    </header>
  
  
  
    <div class="entry-content">
      <div id="ad_container_inside_article" style="clear:both;height:90px;margin:20px auto;padding:0;width:720px;">
        <script type="text/javascript"><!--
        google_ad_client = "ca-pub-7424434269432645";
        /* moorberry.net (octopress) */
        google_ad_slot = "8992473921";
        google_ad_width = 728;
        google_ad_height = 90;
        //-->
        </script>
        <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
      </div>
      <p>I&#8217;m not sure why <a href="http://paypal.com">Paypal</a> has written documentation, regarding its own Express Checkout name-value-pair API, with no enthusiasm at all. The classes used with the Paypal API are extremely easy to use. All of this is likely contributing to the confusion about using Express Checkout. But I’m here now, to save your application, and hopefully your sanity.</p>

<!--more-->




<div style="margin:0 auto 20px;width:600px;"><img src="/images/posts/checkout01.jpg" title="SendGrid" alt="SendGrid" width="100%" /></div>


<p>I’m going to explain why the API objects work and what happens when they’re called. There’s a few different ways that you could go about setting up the product and/or service details. So I’ll keep this post relative to the main focus points and let you handle the before and after parts on an individual basis.</p>

<h2>Referring payment authentication</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="nv">$paypal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SetExpressCheckout</span><span class="p">(</span><span class="nv">$totalPrice</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>We start out by calling the <strong>SetExpressCheckOut()</strong> class. This class caller instantiates the method you’ll use to set up the parameters required for redirecting the customer <em>to</em> Paypal <em>and back</em>. A variable of the total price has to be set to complete the initiation of this class.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="nv">$paypal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SetExpressCheckout</span><span class="p">(</span><span class="nv">$totalPrice</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$paypal</span><span class="o">-&gt;</span><span class="n">setNVP</span><span class="p">(</span><span class="s">&quot;RETURNURL&quot;</span><span class="p">,</span> <span class="s">&quot;http://yourURL.com/confirm.php&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$paypal</span><span class="o">-&gt;</span><span class="n">setNVP</span><span class="p">(</span><span class="s">&quot;HDRIMG&quot;</span><span class="p">,</span> <span class="s">&quot;http://yourURL.com/image.jpg&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$paypal</span><span class="o">-&gt;</span><span class="n">setNVP</span><span class="p">(</span><span class="s">&quot;EMAIL&quot;</span><span class="p">,</span> <span class="s">&quot;$userEmail&quot;</span><span class="p">);</span> <span class="sr">//</span> <span class="n">customer</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">email</span>
</span><span class='line'><span class="nv">$paypal</span><span class="o">-&gt;</span><span class="n">setNVP</span><span class="p">(</span><span class="s">&quot;AMT&quot;</span><span class="p">,</span> <span class="nv">$totalPrice</span><span class="p">);</span>
</span><span class='line'><span class="nv">$paypal</span><span class="o">-&gt;</span><span class="n">setNVP</span><span class="p">(</span><span class="s">&quot;SHIPPINGAMT&quot;</span><span class="p">,</span> <span class="s">&quot;32&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$paypal</span><span class="o">-&gt;</span><span class="n">setNVP</span><span class="p">(</span><span class="s">&quot;CUSTOM&quot;</span><span class="p">,</span> <span class="s">&quot;Anything you want to put&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$paypal</span><span class="o">-&gt;</span><span class="n">setNVP</span><span class="p">(</span><span class="s">&quot;INVNUM&quot;</span><span class="p">,</span> <span class="nv">$uniqueID</span><span class="p">);</span> <span class="sr">//</span> <span class="n">personal</span> <span class="n">invoice</span> <span class="n">number</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$paypal</span><span class="o">-&gt;</span><span class="n">getResponse</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Before you submit for a transfer to Paypal, know that there are optional values you can send with the setNVP() function, to customize the payment process. All values that can be found, by default, in the etc/NVP/SetExpressCheckout.ini file. I’ve included a list of common practice examples and how to use them in this template.</p>

<p>getResponse() sends the user’s browser to Paypal for authentication of credit information. Specifically to a URL that you’ll have to variably set between test mode (sandbox) and live, in the file named etc/NVP/PayPalNVP.ini.</p>

<div style="margin:0 auto 20px;width:600px;"><img src="/images/posts/checkout02.jpg" title="SendGrid" alt="SendGrid" width="100%" /></div>


<h2>Completing the Sale</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="nv">$paypal</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">GetExpressCheckoutDetails</span><span class="p">;</span>
</span><span class='line'><span class="nv">$details</span> <span class="o">=</span> <span class="nv">$paypal</span><span class="o">-&gt;</span><span class="n">getResponse</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>GetExpressCheckoutDetails()</strong> is a class that is most responsible for presenting the custom specifications that you originally sent with SetExpressCheckOut() and SetNVP().</p>

<p><strong>getResponse()</strong> will gather all of the available options as an array, labelled $details.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="nv">$payment</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">DoExpressCheckoutPayment</span><span class="p">(</span><span class="nv">$totalPrice</span><span class="p">);</span>
</span><span class='line'><span class="nv">$response</span> <span class="o">=</span> <span class="nv">$payment</span><span class="o">-&gt;</span><span class="n">getResponse</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>DoExpressCheckoutPayment()</strong> will instinctively initiate a communication with Paypal to notify the service that you are ready for the payment to be transferred to your account. The only necessary requisite, of calling this class and it calling to action, is to include the total price in its variable containment field.</p>

<p><strong>getResponse()</strong> will gather the resulting responses by DoExpressCheckoutPayment() and include them in an array, labelled $response.</p>

<p>It could be said that you could apply another (final) verification for your customer to submit before the transaction is completed by DoExpressCheckoutPayment(). But not technically necessary.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nv">$response</span><span class="p">[</span><span class="s">&#39;PAYMENTSTATUS&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;Completed&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1"># process information</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>One of the returned values in $response will be the PAYMENTSTATUS key. This is a string result that confirms whether or not the money has made been payed to your account. It will definitely be useful when you set up your system to print an invoice on complete, or some insightfully-formatted summary on failure.</p>

<h2>Displaying results from getResponse</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="n">echo</span> <span class="s">&#39;&lt;pre&gt;&#39;</span><span class="p">;</span>
</span><span class='line'><span class="n">print_r</span><span class="p">(</span><span class="nv">$details</span><span class="p">);</span>
</span><span class='line'><span class="n">echo</span> <span class="s">&#39;&lt;pre&gt;&#39;</span><span class="p">;</span>
</span><span class='line'><span class="n">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># The above code should print out something similar to the following:</span>
</span><span class='line'>
</span><span class='line'><span class="n">Array</span>
</span><span class='line'><span class="p">(</span>
</span><span class='line'>    <span class="p">[</span><span class="n">TOKEN</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">EC</span><span class="nv">%2d8DS53628GJ4630109</span>
</span><span class='line'>    <span class="p">[</span><span class="n">TIMESTAMP</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2010</span><span class="nv">%2d03%2d31T08%3a25%3a40Z</span>
</span><span class='line'>    <span class="p">[</span><span class="n">CORRELATIONID</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">ce3e460d38d2f</span>
</span><span class='line'>    <span class="p">[</span><span class="n">ACK</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Success</span>
</span><span class='line'>    <span class="p">[</span><span class="n">VERSION</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">51</span><span class="nv">%2e0</span>
</span><span class='line'>    <span class="p">[</span><span class="n">BUILD</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1247606</span>
</span><span class='line'>    <span class="p">[</span><span class="n">EMAIL</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">test_acct_36654645742_per</span><span class="nv">%40domain%2ecom</span>
</span><span class='line'>    <span class="p">[</span><span class="n">PAYERID</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">W96GXTA5P9BRN</span>
</span><span class='line'>    <span class="p">[</span><span class="n">PAYERSTATUS</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">verified</span>
</span><span class='line'>    <span class="p">[</span><span class="n">FIRSTNAME</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Test</span>
</span><span class='line'>    <span class="p">[</span><span class="n">LASTNAME</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">User</span>
</span><span class='line'>    <span class="p">[</span><span class="n">COUNTRYCODE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">US</span>
</span><span class='line'>    <span class="p">[</span><span class="n">SHIPTONAME</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Test</span><span class="nv">%20User</span>
</span><span class='line'>    <span class="p">[</span><span class="n">SHIPTOSTREET</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="nv">%20Main%20St</span>
</span><span class='line'>    <span class="p">[</span><span class="n">SHIPTOCITY</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">San</span><span class="nv">%20Jose</span>
</span><span class='line'>    <span class="p">[</span><span class="n">SHIPTOSTATE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">CA</span>
</span><span class='line'>    <span class="p">[</span><span class="n">SHIPTOZIP</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">95131</span>
</span><span class='line'>    <span class="p">[</span><span class="n">SHIPTOCOUNTRYCODE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">US</span>
</span><span class='line'>    <span class="p">[</span><span class="n">SHIPTOCOUNTRYNAME</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">United</span><span class="nv">%20States</span>
</span><span class='line'>    <span class="p">[</span><span class="n">ADDRESSSTATUS</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Confirmed</span>
</span><span class='line'>    <span class="p">[</span><span class="n">CUSTOM</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Anything</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">put</span>
</span><span class='line'>    <span class="p">[</span><span class="n">INVNUM</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">IYUUFEOAS0ME3MTI</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'><span class="n">Array</span>
</span><span class='line'><span class="p">(</span>
</span><span class='line'>    <span class="p">[</span><span class="n">TOKEN</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">EC</span><span class="nv">%2d8DS53628GJ4630109</span>
</span><span class='line'>    <span class="p">[</span><span class="n">TIMESTAMP</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2010</span><span class="nv">%2d03%2d31T08%3a25%3a43Z</span>
</span><span class='line'>    <span class="p">[</span><span class="n">CORRELATIONID</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">b1989df39a0ca</span>
</span><span class='line'>    <span class="p">[</span><span class="n">ACK</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Success</span>
</span><span class='line'>    <span class="p">[</span><span class="n">VERSION</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">51</span><span class="nv">%2e0</span>
</span><span class='line'>    <span class="p">[</span><span class="n">BUILD</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1247606</span>
</span><span class='line'>    <span class="p">[</span><span class="n">TRANSACTIONID</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="n">PR0061154034542X</span>
</span><span class='line'>    <span class="p">[</span><span class="n">TRANSACTIONTYPE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">expresscheckout</span>
</span><span class='line'>    <span class="p">[</span><span class="n">PAYMENTTYPE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">instant</span>
</span><span class='line'>    <span class="p">[</span><span class="n">ORDERTIME</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2010</span><span class="nv">%2d03%2d31T08%3a25%3a42Z</span>
</span><span class='line'>    <span class="p">[</span><span class="n">AMT</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">152</span><span class="nv">%2e00</span>
</span><span class='line'>    <span class="p">[</span><span class="n">FEEAMT</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="nv">%2e71</span>
</span><span class='line'>    <span class="p">[</span><span class="n">TAXAMT</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="nv">%2e00</span>
</span><span class='line'>    <span class="p">[</span><span class="n">CURRENCYCODE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">USD</span>
</span><span class='line'>    <span class="p">[</span><span class="n">PAYMENTSTATUS</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Completed</span>
</span><span class='line'>    <span class="p">[</span><span class="n">PENDINGREASON</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">None</span>
</span><span class='line'>    <span class="p">[</span><span class="n">REASONCODE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">None</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Testing</h2>

<p>If you don’t have a <a href="https://developer.paypal.com/">Paypal developer account</a>, than you should certainly sign up for one to use Paypal’s Sandbox, which makes a mock version of Paypal available for testing. Comes complete with personal and business accounts, each with their own credentials, and unlimited funds.</p>

<h2>Summary</h2>

<p>Follow the preceding order and you could easily narrow this code down to a a single file, with enough if() constructs, or span it out to many.</p>

<p>You might be left wondering why it seems less daunting than you have expected. That would be because you’re right. These few objects are all that’s needed to handle a shopping cart system on your website.</p>

<p>Maybe Paypal will use this post to refer new users trying to understand how this system works. But I doubt it.</p>

<h3>Note</h3>

<p>Don&#8217;t forget to adjust your database schema for <em>address2</em> in <strong>$details</strong> when available.</p>

    </div>
  
  
    <footer>
      <div style="border:#012b36 1px dashed;margin:40px 0;padding:20px 0 0 20px;">
        <p>I love sharing! This text is copyrighted under Creative Commons <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" alt="Share-alike License" title="Share-alike License">Attribution-Noncommercial-Share Alike 3.0 Unported</a> license, unless stated otherwise. </p>
        <p>Let me know how you use it - <a href="#footer-widgets" alt="Contact Michael" title="Contact Michael">contact me here.</a></p>
      </div>
      
        <a class="pull-left" href="/blog/server-vs-client/" title="Previous Post: Server vs Client">&laquo; Server vs Client</a>
      
      
        <a class="pull-right" href="/blog/content-delivery-network/" title="Next Post: Dynamically Render Images with PHP">Dynamically Render Images with PHP &raquo;</a>
      
    </footer>
  
</div>

      </article>
      
      <div id="ad_container" style="clear:both;height:90px;margin:0 auto;padding:0 0 0 60px;width:720px;">
        <script type="text/javascript"><!--
        google_ad_client = "ca-pub-7424434269432645";
        /* moorberry.net (octopress) */
        google_ad_slot = "8992473921";
        google_ad_width = 728;
        google_ad_height = 90;
        //-->
        </script>
        <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
      </div>
    </div>
  </div>
  <div class="comments_wrapper"> 
    
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
      </section>
    
  </div>

  <!-- AddThis Button BEGIN -->
  <div class="addthis_toolbox addthis_floating_style addthis_counter_style" style="padding-top:10px;right:0;top:212px;">
    <a class="addthis_button_facebook_like" fb:like:layout="box_count"></a>
    <a class="addthis_button_tweet" tw:count="vertical"></a>
    <a class="addthis_button_google_plusone" g:plusone:size="tall"></a>
    <a class="addthis_counter"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-51685d3f427968b8"></script>
  <!-- AddThis Button END -->

  <div id="footer-widgets">
  <div class="container">
    <div class="row">
  <div class="span3">
    <h2>coderwall badges</h2>
<div id="proudify"></div>
<a href="http://coderwall.com/michaelminter" target="_blank"><img src="http://api.coderwall.com/michaelminter/endorsecount.png" alt="Endorse" id="endorse_button" /></a>
  </div>
  <div class="span3">
    <h2>github</h2>
<ul id="activity"></ul>
  </div>
  <div class="span3">
    <h2>twitter</h2>
<a href="https://twitter.com/mothore" class="twitter-follow-button" data-show-count="true" data-lang="en" target="_blank">Follow @mothore</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<div class="tweet" data-twitter-user="mothore"></div>
  </div>
  <div class="span3">
    <h2>about me</h2>
<p>I have been programming desktop and web applications for more than 7 years. My current <a href="http://www.lin-digital.com/" target="_blank">full-time gig</a> keeps me pretty busy but I still like to get <a href="#top" title="Top of page">personal projects</a> done.</p>

<h2>found on</h2>
<a href="mailto:michael@moorberry.net" rel="tooltip" title="Email Michael" target="_blank"><img src="/images/glyphicons_399_e-mail.png" alt="email icon" class="social_icon"></a>


<a href="https://github.com/michaelminter/" rel="tooltip" title="Github" target="_blank"><img class="social_icon" title="Github" alt="github icon" src="/images/glyphicons_381_github.png"></a>







<a href="http://twitter.com/mothore" rel="tooltip" title="Twitter" target="_blank" target="_blank"><img class="social_icon" title="Twitter" alt="Twitter icon" src="/images/glyphicons_391_twitter_t.png"></a>








<a href="http://stackoverflow.com/users/388253/michael-minter" rel="tooltip" title="Stack Overflow" target="_blank"><img class="social_icon" title="Stack Overflow" alt="stack overflow icon" src="/images/glyphicons_400_stack_overflow.png"></a>

<a href="http://www.linkedin.com/in/mminter" rel="tooltip" title="Linkedin" target="_blank"><img class="social_icon" title="Linkedin" alt="Linkedin icon" src="/images/glyphicons_377_linked_in.png"></a>
<!--a href="https://plus.google.com/110730291563876857467" rel="tooltip" title="Google Plus"><img class="social_icon" title="Google Plus" alt="Google Plus icon" src="/images/glyphicons_386_google_plus.png"></a-->

<br /><br />

<!--h2>contact</h2>
<a href="mailto:michael@moorberry.net?subject=Found on Moorberry.net" alt="Mail Michal">Michael@moorberry.net</a-->

  </div>
</div>

  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-left">
  All content is under Copyright &copy; 2010-2014 by the individual authors of this blog and is released<br />under the <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">Attribution-Noncommercial-Share Alike 3.0 Unported</a> license.<br />
</p>
<p class="pull-right">
  <span>Powered by <a href="http://octopress.org/">Octopress</a>.</span>
  
    <!--span>Design by <a href="http://www.AdrianArtiles.com">Adrian Artiles</a>.</span-->
  
</p>

  </div>
</footer>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="/javascripts/jquery-proudify.min.js"></script>
<script>window.jQuery || document.write('<script src="/javascripts/libs/jquery-1.7.2.min.js" type="text/javascript"><\/script>')</script>
<script src="/javascripts/libs/bootstrap.min.js" type="text/javascript"></script>
<script src="/javascripts/libs/jquery.masonry.min.js" type="text/javascript"></script>
<script src="/javascripts/custom.js" type="text/javascript"></script>
<script type="text/javascript">
  $('#proudify').proudify({username:'michaelminter',service:'coderwall'});
</script>
<script type="text/javascript" src="/javascripts/jquery.timeago.js"></script>
<script type="text/javascript" src="/javascripts/jquery.github-activity.js"></script>
<script type="text/javascript">
  $(function() {
    $("ul#activity").githubActivityFor('michaelminter', {
      'limit': 3,
      'wrap': function(item) {
        item.prepend('<img src="/images/github_16.png" style="float:left;margin:0 5px 0 0;" />');
        return item
      }
    });
  });
</script>


<script type="text/javascript">
      var disqus_shortname = 'michaelminter';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://moorberry.net/blog/paypal-express-checkout-nvp-api/';
        var disqus_url = 'http://moorberry.net/blog/paypal-express-checkout-nvp-api/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




</body>
</html>
